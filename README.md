# Farkle AI

## About
This is a implementation with an AI of the game Farkle. I implemented the game Farkle and fully designed the AI. Please read the how does the AI work section if you want more detail on how the AI works. Farkle has luck in it so the AI agent doesn't win every game.

## Instructions
This version of Farkle can be played with any combination of humans and AI as long as the number of humans and AI is greater than 1. Click the Start Game button at any time to restart the game. When selecting dice, you must only select one set of dice that can score. For example, if you roll two 5s, you must select the 5s one at a time. If you are trying to select a scoring option with multiple dice, you must select all of the dice required to score points at once. For example, if you roll three 6s, you must select all three 6s to score 600 points. Here are the possible scoring options in this version:

**__Farkle Scoring:__**
- **1:** 100 points
- **5:** 50 points
- **Three 1’s:** 1,000 points
- **Three 2’s:** 200 points
- **Three 3’s:** 300 points
- **Three 4’s:** 400 points
- **Three 5’s:** 500 points
- **Three 6’s:** 600 points
- **Full Run:** 3000 points
- **3 Pairs:** 1500 points
- **4 of a kind and a pair:** 1500 points

**Hot Dice:** If you get all 6 dice to your hand, you can roll all 6 dice again!

**Farkle!:** If you don’t roll any of these solutions, you farkle and lose all of your points from this round!

**Bank:** Adds your current round score to your total score and ends your turn.

## How Does the AI Work?

The AI agent constructs a tree for each roll. 
- Each node in the tree represents one possible outcome of its parent node. 
- This node contains an expected value, and the possible ways to score (to make its children).
- All of the leaf nodes are either banking the dice or rolling again.

The values are generated by if the:
- Current node is Bank: EV = current EV
- If the current node is a solution involving dice: EV = current EV + EV of the solution you are moving to your hand
- Current node is Roll: The EV is different for the number of dice you are rolling. The values start at:
  - 1 dice: EV = 25
  - 2 dice: EV = 61.111
  - 3 dice: EV = 154
  - 4 dice: EV = 311.53
  - 5 dice: EV = 351
  - 6 dice: EV = 5000
- These values were acquired from expected value calculations and data collecting. These values do change based on special conditions like hot dice.

Next, the AI picks the leaf node with the highest expected value. 
- It then finds the path to the root node to that child node
- The AI will then play each move in that path one at a time
- If the child node is a roll, we will start over and construct a new tree with fewer dice.
- The other thing that carries over between the trees in a turn is the EV of the dice currently in your hand.



**Ex.** The dice roll: 2 1 3 4 5 2, would generate this tree:

<br>Name: root , EV: 0.0
<br>|-- Name: 1 , EV: 100.0
<br>|   |-- Name: 5 , EV: 150.0
<br>|   |   |-- Name: Roll , EV: 311.53086419753083
<br>|   |   |-- Name: Bank , EV: 150.0
<br>|   |-- Name: Roll , EV: 351.0
<br>|   |-- Name: Bank , EV: 100.0
<br>|-- Name: 5 , EV: 50.0
<br>    |-- Name: 1 , EV: 150.0
<br>    |   |-- Name: Roll , EV: 311.53086419753083
<br>    |   |-- Name: Bank , EV: 150.0
<br>    |-- Name: Roll , EV: 351.0
<br>    |-- Name: Bank , EV: 50.0

- The AI would pick the node roll with an EV = 351
- The path to this node is [0, 1]
- Then it would roll the dice to get: 2 2 6 5 4 0 
- The new tree would be:

<br>Name: root , EV: 100.0
<br>|-- Name: 5 , EV: 150.0
<br>    |-- Name: Roll , EV: 311.53086419753083
<br>    |-- Name: Bank , EV: 150.0

- The AI would pick the node roll with an EV = 311.5308
- The path to this node is [0, 0]
- Then it would construct a new tree with 1 fewer dice
- This will keep going until the AI has ended its turn either by banking its score or by farkling.

## Author
This project was created by John Stromberg as the final project for an AI class.
